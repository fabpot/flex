---------------------------------------------------------------------------

by nicolas-grekas at 2020-06-16T22:35:51Z

@jderusse can you have a second look please? I just pushed a cleanup, the logic should remain the same.

---------------------------------------------------------------------------

by jderusse at 2020-06-16T22:54:13Z

LGTM. Thanks for the refactor
